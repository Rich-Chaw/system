<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Graph Statistics Component Test</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="client/styles.css">
</head>
<body>
    <div class="container mt-4">
        <h1>Graph Statistics Component Test</h1>
        
        <div class="row">
            <div class="col-md-6">
                <div id="graph-statistics-container">
                    <!-- Graph Statistics Component will be rendered here -->
                </div>
            </div>
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h5>Test Controls</h5>
                    </div>
                    <div class="card-body">
                        <button class="btn btn-primary" id="loadTestGraph">Load Test Graph (Old Format)</button>
                        <button class="btn btn-success" id="loadTestGraphNew">Load Test Graph (New Format)</button>
                        <button class="btn btn-secondary" id="clearGraph">Clear Graph</button>
                        <button class="btn btn-info" id="toggleExpand">Toggle Expand</button>
                        
                        <hr>
                        <h6>Test Graph Info:</h6>
                        <p>A simple test graph with 10 nodes and 15 edges to demonstrate the statistics component.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Component Architecture Scripts -->
    <script src="client/js/core/BaseComponent.js"></script>
    <script src="client/js/components/GraphStatisticsComponent.js"></script>
    
    <script>
        // Initialize component manager
        const componentManager = ComponentManager.getInstance();
        
        // Initialize Graph Statistics Component
        const graphStats = new GraphStatisticsComponent('graph-statistics-container', {
            showAdvancedStats: true,
            showDegreeDistribution: true,
            expandable: true
        });
        
        // Test data - using both formats to test normalization
        const testGraphData = {
            nodes: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9],
            edges: [
                [0, 1], [0, 2], [1, 2], [1, 3], [2, 3], [2, 4],
                [3, 4], [3, 5], [4, 5], [4, 6], [5, 6], [5, 7],
                [6, 7], [7, 8], [8, 9]
            ]
        };
        
        // Test with old format (nodes/edges)
        const testGraphInfoOldFormat = {
            nodes: 10,
            edges: 15,
            density: 0.333,
            is_connected: true
        };
        
        // Test with new format (num_nodes/num_edges)
        const testGraphInfoNewFormat = {
            num_nodes: 10,
            num_edges: 15,
            density: 0.333,
            is_connected: true,
            clustering_coefficient: 0.467,
            average_path_length: 2.4
        };
        
        // Test controls
        document.getElementById('loadTestGraph').addEventListener('click', () => {
            // Test with old format first
            console.log('Testing with old format (nodes/edges)');
            graphStats.handleGraphLoaded(testGraphData, testGraphInfoOldFormat);
        });
        
        document.getElementById('clearGraph').addEventListener('click', () => {
            graphStats.handleGraphCleared();
        });
        
        document.getElementById('loadTestGraphNew').addEventListener('click', () => {
            // Test with new format
            console.log('Testing with new format (num_nodes/num_edges)');
            graphStats.handleGraphLoaded(testGraphData, testGraphInfoNewFormat);
        });
        
        document.getElementById('toggleExpand').addEventListener('click', () => {
            graphStats.toggleExpanded();
        });
        
        console.log('Graph Statistics Component Test initialized');
    </script>
</body>
</html>